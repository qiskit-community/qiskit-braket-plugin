<!DOCTYPE html>

<html lang="en" data-content_root="../../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>qiskit_braket_provider.providers.braket_backend &#8212; Qiskit-Braket provider  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=82a976d7" />
    <link rel="stylesheet" type="text/css" href="../../../_static/alabaster.css?v=039e1c02" />
    <link rel="stylesheet" type="text/css" href="../../../_static/jupyter-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/thebelab.css" />
    <script src="../../../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../../../_static/doctools.js?v=888ff710"></script>
    <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../_static/thebelab-helper.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@jupyter-widgets/html-manager@^1.0.1/dist/embed-amd.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
   
  <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <h1>Source code for qiskit_braket_provider.providers.braket_backend</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;AWS Braket backends.&quot;&quot;&quot;</span>


<span class="kn">import</span> <span class="nn">datetime</span>
<span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">from</span> <span class="nn">abc</span> <span class="kn">import</span> <span class="n">ABC</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Iterable</span><span class="p">,</span> <span class="n">Union</span><span class="p">,</span> <span class="n">List</span>

<span class="kn">from</span> <span class="nn">braket.aws</span> <span class="kn">import</span> <span class="n">AwsDevice</span><span class="p">,</span> <span class="n">AwsQuantumTaskBatch</span><span class="p">,</span> <span class="n">AwsQuantumTask</span>
<span class="kn">from</span> <span class="nn">braket.aws.queue_information</span> <span class="kn">import</span> <span class="n">QueueDepthInfo</span>
<span class="kn">from</span> <span class="nn">braket.circuits</span> <span class="kn">import</span> <span class="n">Circuit</span>
<span class="kn">from</span> <span class="nn">braket.devices</span> <span class="kn">import</span> <span class="n">LocalSimulator</span>
<span class="kn">from</span> <span class="nn">braket.tasks.local_quantum_task</span> <span class="kn">import</span> <span class="n">LocalQuantumTask</span>
<span class="kn">from</span> <span class="nn">qiskit</span> <span class="kn">import</span> <span class="n">QuantumCircuit</span>
<span class="kn">from</span> <span class="nn">qiskit.providers</span> <span class="kn">import</span> <span class="n">BackendV2</span><span class="p">,</span> <span class="n">QubitProperties</span><span class="p">,</span> <span class="n">Options</span><span class="p">,</span> <span class="n">Provider</span>

<span class="kn">from</span> <span class="nn">.adapter</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">aws_device_to_target</span><span class="p">,</span>
    <span class="n">local_simulator_to_target</span><span class="p">,</span>
    <span class="n">convert_qiskit_to_braket_circuits</span><span class="p">,</span>
    <span class="n">wrap_circuits_in_verbatim_box</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">.braket_job</span> <span class="kn">import</span> <span class="n">AmazonBraketTask</span>
<span class="kn">from</span> <span class="nn">..</span> <span class="kn">import</span> <span class="n">version</span>
<span class="kn">from</span> <span class="nn">..exception</span> <span class="kn">import</span> <span class="n">QiskitBraketException</span>

<span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>


<span class="n">TASK_ID_DIVIDER</span> <span class="o">=</span> <span class="s2">&quot;;&quot;</span>


<span class="k">class</span> <span class="nc">BraketBackend</span><span class="p">(</span><span class="n">BackendV2</span><span class="p">,</span> <span class="n">ABC</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;BraketBackend.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;BraketBackend[</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">]&quot;</span>


<div class="viewcode-block" id="BraketLocalBackend">
<a class="viewcode-back" href="../../../stubs/qiskit_braket_provider.providers.BraketLocalBackend.html#qiskit_braket_provider.providers.BraketLocalBackend">[docs]</a>
<span class="k">class</span> <span class="nc">BraketLocalBackend</span><span class="p">(</span><span class="n">BraketBackend</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;BraketLocalBackend.&quot;&quot;&quot;</span>

<div class="viewcode-block" id="BraketLocalBackend.__init__">
<a class="viewcode-back" href="../../../stubs/qiskit_braket_provider.providers.BraketLocalBackend.html#qiskit_braket_provider.providers.BraketLocalBackend.__init__">[docs]</a>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;default&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">fields</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;AWSBraketLocalBackend for local execution of circuits.</span>

<span class="sd">        Example:</span>
<span class="sd">            &gt;&gt;&gt; device = LocalSimulator()                         #Local State Vector Simulator</span>
<span class="sd">            &gt;&gt;&gt; device = LocalSimulator(&quot;default&quot;)                #Local State Vector Simulator</span>
<span class="sd">            &gt;&gt;&gt; device = LocalSimulator(name=&quot;default&quot;)        #Local State Vector Simulator</span>
<span class="sd">            &gt;&gt;&gt; device = LocalSimulator(name=&quot;braket_sv&quot;)      #Local State Vector Simulator</span>
<span class="sd">            &gt;&gt;&gt; device = LocalSimulator(name=&quot;braket_dm&quot;)      #Local Density Matrix Simulator</span>

<span class="sd">        Args:</span>
<span class="sd">            name: name of backend</span>
<span class="sd">            **fields: extra fields</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="o">**</span><span class="n">fields</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">backend_name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_aws_device</span> <span class="o">=</span> <span class="n">LocalSimulator</span><span class="p">(</span><span class="n">backend</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">backend_name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_target</span> <span class="o">=</span> <span class="n">local_simulator_to_target</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_aws_device</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_aws_device</span><span class="o">.</span><span class="n">status</span></div>


    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">target</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_target</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">max_circuits</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">_default_options</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Options</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">dtm</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;System time resolution of output signals is not supported by </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">.&quot;</span>
        <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">meas_map</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]]:</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Measurement map is not supported by </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">qubit_properties</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">qubit</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">QubitProperties</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">QubitProperties</span><span class="p">]]:</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>

    <span class="k">def</span> <span class="nf">drive_channel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">qubit</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Drive channel is not supported by </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">measure_channel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">qubit</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Measure channel is not supported by </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">acquire_channel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">qubit</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Acquire channel is not supported by </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">control_channel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">qubits</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">int</span><span class="p">]):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Control channel is not supported by </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">run_input</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">QuantumCircuit</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">QuantumCircuit</span><span class="p">]],</span> <span class="o">**</span><span class="n">options</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AmazonBraketTask</span><span class="p">:</span>
        <span class="n">convert_input</span> <span class="o">=</span> <span class="p">(</span>
            <span class="p">[</span><span class="n">run_input</span><span class="p">]</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">run_input</span><span class="p">,</span> <span class="n">QuantumCircuit</span><span class="p">)</span> <span class="k">else</span> <span class="nb">list</span><span class="p">(</span><span class="n">run_input</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="n">circuits</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Circuit</span><span class="p">]</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">convert_qiskit_to_braket_circuits</span><span class="p">(</span><span class="n">convert_input</span><span class="p">))</span>
        <span class="n">shots</span> <span class="o">=</span> <span class="n">options</span><span class="p">[</span><span class="s2">&quot;shots&quot;</span><span class="p">]</span> <span class="k">if</span> <span class="s2">&quot;shots&quot;</span> <span class="ow">in</span> <span class="n">options</span> <span class="k">else</span> <span class="mi">1024</span>
        <span class="k">if</span> <span class="n">shots</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">circuits</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">state_vector</span><span class="p">(),</span> <span class="n">circuits</span><span class="p">))</span>
        <span class="n">tasks</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">circuit</span> <span class="ow">in</span> <span class="n">circuits</span><span class="p">:</span>
                <span class="n">task</span><span class="p">:</span> <span class="n">LocalQuantumTask</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_aws_device</span><span class="o">.</span><span class="n">run</span><span class="p">(</span>
                    <span class="n">task_specification</span><span class="o">=</span><span class="n">circuit</span><span class="p">,</span> <span class="n">shots</span><span class="o">=</span><span class="n">shots</span>
                <span class="p">)</span>
                <span class="n">tasks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">task</span><span class="p">)</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;During creation of tasks an error occurred: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">ex</span><span class="p">)</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Cancelling all tasks </span><span class="si">%d</span><span class="s2">!&quot;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">tasks</span><span class="p">))</span>
            <span class="k">for</span> <span class="n">task</span> <span class="ow">in</span> <span class="n">tasks</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Attempt to cancel </span><span class="si">%s</span><span class="s2">...&quot;</span><span class="p">,</span> <span class="n">task</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
                <span class="n">task</span><span class="o">.</span><span class="n">cancel</span><span class="p">()</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;State of </span><span class="si">%s</span><span class="s2">: </span><span class="si">%s</span><span class="s2">.&quot;</span><span class="p">,</span> <span class="n">task</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">task</span><span class="o">.</span><span class="n">state</span><span class="p">())</span>
            <span class="k">raise</span> <span class="n">ex</span>

        <span class="n">task_id</span> <span class="o">=</span> <span class="n">TASK_ID_DIVIDER</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">task</span><span class="o">.</span><span class="n">id</span> <span class="k">for</span> <span class="n">task</span> <span class="ow">in</span> <span class="n">tasks</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">AmazonBraketTask</span><span class="p">(</span>
            <span class="n">task_id</span><span class="o">=</span><span class="n">task_id</span><span class="p">,</span>
            <span class="n">tasks</span><span class="o">=</span><span class="n">tasks</span><span class="p">,</span>
            <span class="n">backend</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>
            <span class="n">shots</span><span class="o">=</span><span class="n">shots</span><span class="p">,</span>
        <span class="p">)</span></div>



<div class="viewcode-block" id="AWSBraketBackend">
<a class="viewcode-back" href="../../../stubs/qiskit_braket_provider.providers.AWSBraketBackend.html#qiskit_braket_provider.providers.AWSBraketBackend">[docs]</a>
<span class="k">class</span> <span class="nc">AWSBraketBackend</span><span class="p">(</span><span class="n">BraketBackend</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;AWSBraketBackend.&quot;&quot;&quot;</span>

<div class="viewcode-block" id="AWSBraketBackend.__init__">
<a class="viewcode-back" href="../../../stubs/qiskit_braket_provider.providers.AWSBraketBackend.html#qiskit_braket_provider.providers.AWSBraketBackend.__init__">[docs]</a>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>  <span class="c1"># pylint: disable=too-many-arguments</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">device</span><span class="p">:</span> <span class="n">AwsDevice</span><span class="p">,</span>
        <span class="n">provider</span><span class="p">:</span> <span class="n">Provider</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">description</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">online_date</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">backend_version</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">fields</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;AWSBraketBackend for execution circuits against AWS Braket devices.</span>

<span class="sd">        Example:</span>
<span class="sd">            &gt;&gt;&gt; provider = AWSBraketProvider()</span>
<span class="sd">            &gt;&gt;&gt; backend = provider.get_backend(&quot;SV1&quot;)</span>
<span class="sd">            &gt;&gt;&gt; transpiled_circuit = transpile(circuit, backend=backend)</span>
<span class="sd">            &gt;&gt;&gt; backend.run(transpiled_circuit, shots=10).result().get_counts()</span>
<span class="sd">            {&quot;100&quot;: 10, &quot;001&quot;: 10}</span>

<span class="sd">        Args:</span>
<span class="sd">            device: Braket device class</span>
<span class="sd">            provider: Qiskit provider for this backend</span>
<span class="sd">            name: name of backend</span>
<span class="sd">            description: description of backend</span>
<span class="sd">            online_date: online date</span>
<span class="sd">            backend_version: backend version</span>
<span class="sd">            **fields: other arguments</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
            <span class="n">provider</span><span class="o">=</span><span class="n">provider</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="n">description</span><span class="p">,</span>
            <span class="n">online_date</span><span class="o">=</span><span class="n">online_date</span><span class="p">,</span>
            <span class="n">backend_version</span><span class="o">=</span><span class="n">backend_version</span><span class="p">,</span>
            <span class="o">**</span><span class="n">fields</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">user_agent</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;QiskitBraketProvider/</span><span class="si">{</span><span class="n">version</span><span class="o">.</span><span class="n">__version__</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="n">device</span><span class="o">.</span><span class="n">aws_session</span><span class="o">.</span><span class="n">add_braket_user_agent</span><span class="p">(</span><span class="n">user_agent</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_device</span> <span class="o">=</span> <span class="n">device</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_target</span> <span class="o">=</span> <span class="n">aws_device_to_target</span><span class="p">(</span><span class="n">device</span><span class="o">=</span><span class="n">device</span><span class="p">)</span></div>


    <span class="k">def</span> <span class="nf">retrieve_job</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">task_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AmazonBraketTask</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return a single job submitted to AWS backend.</span>

<span class="sd">        Args:</span>
<span class="sd">            task_id: ID of the task to retrieve.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The job with the given ID.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">task_ids</span> <span class="o">=</span> <span class="n">task_id</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">TASK_ID_DIVIDER</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">AmazonBraketTask</span><span class="p">(</span>
            <span class="n">task_id</span><span class="o">=</span><span class="n">task_id</span><span class="p">,</span>
            <span class="n">backend</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>
            <span class="n">tasks</span><span class="o">=</span><span class="p">[</span><span class="n">AwsQuantumTask</span><span class="p">(</span><span class="n">arn</span><span class="o">=</span><span class="n">task_id</span><span class="p">)</span> <span class="k">for</span> <span class="n">task_id</span> <span class="ow">in</span> <span class="n">task_ids</span><span class="p">],</span>
        <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">target</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_target</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">max_circuits</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">_default_options</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Options</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">qubit_properties</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">qubit</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">QubitProperties</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">QubitProperties</span><span class="p">]]:</span>
        <span class="c1"># TODO: fetch information from device.properties.provider  # pylint: disable=fixme</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>

    <span class="k">def</span> <span class="nf">queue_depth</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">QueueDepthInfo</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Task queue depth refers to the total number of quantum tasks currently waiting</span>
<span class="sd">        to run on a particular device.</span>

<span class="sd">        Returns:</span>
<span class="sd">            QueueDepthInfo: Instance of the QueueDepth class representing queue depth</span>
<span class="sd">            information for quantum jobs and hybrid jobs.</span>
<span class="sd">            Queue depth refers to the number of quantum jobs and hybrid jobs queued on a particular</span>
<span class="sd">            device. The normal tasks refers to the quantum jobs not submitted via Hybrid Jobs.</span>
<span class="sd">            Whereas, the priority tasks refers to the total number of quantum jobs waiting to run</span>
<span class="sd">            submitted through Amazon Braket Hybrid Jobs. These tasks run before the normal tasks.</span>
<span class="sd">            If the queue depth for normal or priority quantum tasks is greater than 4000, we display</span>
<span class="sd">            their respective queue depth as &#39;&gt;4000&#39;. Similarly, for hybrid jobs if there are more</span>
<span class="sd">            than 1000 jobs queued on a device, display the hybrid jobs queue depth as &#39;&gt;1000&#39;.</span>
<span class="sd">            Additionally, for QPUs if hybrid jobs queue depth is 0, we display information about</span>
<span class="sd">            priority and count of the running hybrid job.</span>

<span class="sd">        Example:</span>
<span class="sd">            Queue depth information for a running hybrid job.</span>
<span class="sd">            &gt;&gt;&gt; device = AWSBraketProvider().get_backend(&quot;SV1&quot;)</span>
<span class="sd">            &gt;&gt;&gt; print(device.queue_depth())</span>
<span class="sd">            QueueDepthInfo(quantum_tasks={&lt;QueueType.NORMAL: &#39;Normal&#39;&gt;: &#39;0&#39;,</span>
<span class="sd">            &lt;QueueType.PRIORITY: &#39;Priority&#39;&gt;: &#39;1&#39;}, jobs=&#39;0 (1 prioritized job(s) running)&#39;)</span>

<span class="sd">            If more than 4000 quantum jobs queued on a device.</span>
<span class="sd">            &gt;&gt;&gt; device = AWSBraketProvider().get_backend(&quot;SV1&quot;)</span>
<span class="sd">            &gt;&gt;&gt; print(device.queue_depth())</span>
<span class="sd">            QueueDepthInfo(quantum_tasks={&lt;QueueType.NORMAL: &#39;Normal&#39;&gt;: &#39;&gt;4000&#39;,</span>
<span class="sd">            &lt;QueueType.PRIORITY: &#39;Priority&#39;&gt;: &#39;2000&#39;}, jobs=&#39;100&#39;)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_device</span><span class="o">.</span><span class="n">queue_depth</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">dtm</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;System time resolution of output signals is not supported by </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">.&quot;</span>
        <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">meas_map</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]]:</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Measurement map is not supported by </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">drive_channel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">qubit</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Drive channel is not supported by </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">measure_channel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">qubit</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Measure channel is not supported by </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">acquire_channel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">qubit</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Acquire channel is not supported by </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">control_channel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">qubits</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">int</span><span class="p">]):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Control channel is not supported by </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">run_input</span><span class="p">,</span> <span class="o">**</span><span class="n">options</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">run_input</span><span class="p">,</span> <span class="n">QuantumCircuit</span><span class="p">):</span>
            <span class="n">circuits</span> <span class="o">=</span> <span class="p">[</span><span class="n">run_input</span><span class="p">]</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">run_input</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="n">circuits</span> <span class="o">=</span> <span class="n">run_input</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">QiskitBraketException</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unsupported input type: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">run_input</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="n">braket_circuits</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">convert_qiskit_to_braket_circuits</span><span class="p">(</span><span class="n">circuits</span><span class="p">))</span>

        <span class="k">if</span> <span class="n">options</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;verbatim&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">):</span>
            <span class="n">braket_circuits</span> <span class="o">=</span> <span class="n">wrap_circuits_in_verbatim_box</span><span class="p">(</span><span class="n">braket_circuits</span><span class="p">)</span>

        <span class="n">batch_task</span><span class="p">:</span> <span class="n">AwsQuantumTaskBatch</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_device</span><span class="o">.</span><span class="n">run_batch</span><span class="p">(</span>
            <span class="n">braket_circuits</span><span class="p">,</span> <span class="o">**</span><span class="n">options</span>
        <span class="p">)</span>
        <span class="n">tasks</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">AwsQuantumTask</span><span class="p">]</span> <span class="o">=</span> <span class="n">batch_task</span><span class="o">.</span><span class="n">tasks</span>
        <span class="n">task_id</span> <span class="o">=</span> <span class="n">TASK_ID_DIVIDER</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">task</span><span class="o">.</span><span class="n">id</span> <span class="k">for</span> <span class="n">task</span> <span class="ow">in</span> <span class="n">tasks</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">AmazonBraketTask</span><span class="p">(</span>
            <span class="n">task_id</span><span class="o">=</span><span class="n">task_id</span><span class="p">,</span> <span class="n">tasks</span><span class="o">=</span><span class="n">tasks</span><span class="p">,</span> <span class="n">backend</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">shots</span><span class="o">=</span><span class="n">options</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;shots&quot;</span><span class="p">)</span>
        <span class="p">)</span></div>

</pre></div>

          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../../index.html">
              <img class="logo" src="../../../_static/logo.png" alt="Logo"/>
            </a></p>
<h1 class="logo"><a href="../../../index.html">Qiskit-Braket provider</a></h1>






<p>
<iframe src="https://ghbtns.com/github-btn.html?user=qiskit-community&repo=qiskit-braket-provider&type=star&count=False&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>





<h3>Navigation</h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../apidocs/index.html">API References</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../how_tos/0_how_to_access_AWS_Braket_devices.html">How-to: access AWS Braket devices</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../how_tos/1_how_to_run_circuits_on_Braket_devices.html">How-to: run circuit on Braket devices</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../how_tos/2_how_to_retrieve_results_from_backend.html">How-to: retrieve results from backend</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../how_tos/3_how_to_qiskit_hybrid_job.html">How-to: Qiskit Hybrid Job</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../how_tos/4_how_to_verbatim_circuits.html">How-to: run circuit on Braket device using verbatim mode</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../how_tos/5_how_to_run_circuits_on_Braket_local_backend.html">How-to: run circuit on Braket local backend</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorials/0_tutorial_qiskit-braket-provider_overview.html">Tutorial: Qiskit-Braket provider overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorials/1_tutorial_vqe.html">Tutorial: Runing VQE on Braket backend</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorials/2_tutorial_hybrid_jobs_byoc.html">Tutorial: Variational algorithms on Hybrid jobs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorials/3_tutorial_minimum_eigen_optimizer.html">Tutorial: Minimum Eigen Optimizer</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../../index.html">Documentation overview</a><ul>
  <li><a href="../../index.html">Module code</a><ul>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2022.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.2.6</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
    </div>

    

    
  </body>
</html>